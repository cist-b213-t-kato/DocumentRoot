<html>

<head>
<title>CIST非公式サイト</title>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link href="common.css" rel="stylesheet" />

</head>

<body>
	
    <div class="col-sm-12">
        <h1>CIST非公式サイト</h1>
        <p>裏サイトだと暗いイメージがあるので改名</p>
    </div>

    <div class="col-sm-6">
        <h2>プロメン成果物</h2>
        <h3>b216</h3>
        <ul>
            <!--<li><a href="./wicket-lecture">wicket-lecture</a></li>-->
            <li><a href="./trump">trump</a></li>
            <li><a href="./cist-cloud">cist-cloud</a></li>
        </ul>

        <h3>b215</h3>
        <ul>
            <li><a href="./PMPS">PMPS</a></li>
        </ul>


        <h3>m217</h3>
        <ul>
            <li><a href="./wicket-handson">wicket-handson</a></li>
            <li><a href="./ars">ars</a></li>
        </ul>
    </div>

    <div class="col-sm-6">
    	<h2>K研究室の活動？</h2>
    	<h3>輪講</h3>
    	<ul>
    		<li><a href="http://a.co/5xFo4Y8">よしたかさんの輪講おすすめリスト（amazonのほしいものリスト）</a></li>
    	</ul>
    </div>

    <div class="col-sm-12">
	    <h2>シャトルバス</h2>
	    <div class="col-sm-6">
		    <h3>往路</h3>
		    <table>
		      <thead>
		      	<tr><th>千歳駅発</th><th>南千歳駅発</th><th>研究実験棟発</th><th>本部棟着</th></tr>
		      </thead>
		      <tbody id="ouro">
		      </tbody>
		    </table>
		  </div>

	    <div class="col-sm-6">
		    <h3>復路</h3>
		    <table>
		      <thead>
		      	<tr><th>本部棟発</th><th>研究実験棟発</th><th>南千歳駅発</th><th>千歳駅着</th></tr>
		      </thead>
		      <tbody id="fukuro">
		      </tbody>
		    </table>
	  	</div>

	  	<div class="col-sm-12">
	    	<p style="font-size:40px; font-weight:bold;"><a href="https://twitter.com/kagichan_kyun">カギちゃん</a>なんか必要ねえんだよ（宣戦布告）</p>
	  	</div>
  	</div>

    <div class="col-sm-12">
    	<h2>授業とか？</h2>
    	<h3>情報科教育法</h3>
    	<ul>
    		<li><a href="./wave.html">sin/cosを動かす</a></li>
    	</ul>
    </div>

    <div class="col-sm-12" style="margin-bottom: 100px;">
    	<h2>PM2.5分布予測</h2>
    	<p>先日PM2.5の濃度が上がってたらしいのでこれで常時観察したい。。。配信元は<a href="http://www.tenki.jp/particulate_matter/1/">tenki.jp</a>。</p>
    	<img src="http://az416740.vo.msecnd.net/static-images/particulate_matter/12/area_1/large.jpg" style="width:300px;"/>
    	<img src="http://az416740.vo.msecnd.net/static-images/particulate_matter/15/area_1/large.jpg" style="width:300px;"/>
    	<img src="http://az416740.vo.msecnd.net/static-images/particulate_matter/18/area_1/large.jpg" style="width:300px;"/>
    	<img src="http://az416740.vo.msecnd.net/static-images/particulate_matter/21/area_1/large.jpg" style="width:300px;"/>
    </div>

	<script type="text/javascript">
		
		function toDate( tStr ) {
			var crt = new Date();
			var dateStr = crt.getFullYear() + "-" + (crt.getMonth()+1)
									+ "-" + crt.getDate()
									+ " " + tStr;
			return new Date(dateStr);
		}

		function getFirst( times ) {
			for ( var i=0; i<times.length; i++ ) {
				if ( times[i] && times[i] != "" ) {
					return times[i];
				}
			}
			return ""; 
		}

		function getLast( times ) {
			for ( var i=times.length-1; i>=0; i-- ) {
				if ( times[i] && times[i] != "" ) {
					return times[i];
				}
			}
			return "";
		}

		function display( id , json ) {

			var crt = new Date();

			// var stopDate = toDate(json.array[1][3]);

			// console.log(toDate(json.array[0][3]) > crt);
			// console.log(toDate(json.array[1][3]) > crt);

			$(id).empty();

			// var list = [];
			// for ( var j in json.array ) {
			// 	if ( crt <= toDate(json.array[j][3]) ) {
			// 		list.push(json.array[j]);
			// 	}
			// }
			var list = json.array;

			var late = true;

			for ( var j in list ) {
        
				var tr = $("<tr>");

				var times = list[j];

				var first = toDate(getFirst(times));
				var last = toDate(getLast(times));

				if ( late && crt <= first ) {
					tr.addClass("highlight");
					tr.addClass("large");
					late = false;
				}

				if ( crt >= first && crt <= last ) {
					tr.addClass("highlight");
				}



				// var first = toDate(a[0]);
				// var last = toDate(a[a.length-1]);
				// var isBetween = first <= crt && last >= crt;

				// if ( latest == 1 ) {
				// 	latest = -1;
				// } else if ( latest !=-1 && crt <= first && latest == 0 ) {
				// 	latest = 1;
				// }

				// if ( latest == 1 || isBetween ) {
				// 	tr.addClass("highlight");
				// }

				for ( var i in times ) {

          var td = $("<td>");
					var t = times[i];
					if ( !t || t == "" ) {
            td.text("-");
					} else {
						td.text(t);
					}
					tr.append(td);
				}
				$(id).append(tr);
			}
		}

		// var dateStr = crt.getFullYear() + "-" + (crt.getMonth()+1) + "-" +crt.getDate()
		// 							+ " 16:10" + ":00"


		var ouro = {
	    "array" : [
	        ["7:50","","8:05","8:08"],
	        ["7:55","","8:10","8:13"],
	        ["","7:57","8:05","8:08"],
	        ["","8:19","8:27","8:30"],
	        ["8:26","8:36","8:44","8:47"],
	        ["8:29","8:39","8:47","8:50"],
	        ["8:33","","8:48","8:51"],
	        ["","8:41","8:49","8:52"],
	        ["9:15","","9:30","9:33"],
	        ["","9:30","9:38","9:41"],
	        ["9:47","","","10:00"],
	        ["10:00","","10:15","10:18"],
	        ["10:03","","","10:16"],
	        ["10:12","10:22","10:30","10:33"],
	        ["10:17","10:27","10:35","10:38"],
	        ["","10:28","10:36","10:39"],
	        ["","10:29","10:37","10:40"],
	        ["11:10","11:20","11:28","11:31"],
	        ["12:15","12:25","12:33","12:36"],
	        ["12:30","12:40","12:48","12:51"],
	        ["","12:44","12:52","12:55"],
	        ["12:44","12:54","13:02","13:05"],
	        ["","","13:05","13:08"],
	        ["13:30","","13:45","13:48"],
	        ["","13:44","13:52","13:55"],
	        ["14:25","","14:40","14:43"],
	        ["","14:30","14:38","14:41"],
	        ["15:20","15:30","15:38","15:41"],
	        ["16:18","16:28","16:36","16:39"],
	        ["","","18:20","18:23"],
	    ]
		}

		var fukuro = {
			"array" : [ //fukuro
        ["10:45", "10:48", "10:56", "11:06"],
        ["12:20", "12:23", "12:31", "12:41"],
        ["12:25", "12:28", "12:36", ""     ],
        ["13:00", "13:03", "",      ""     ],
        ["13:05", "13:08", "13:16", "13:26"],
        ["13:10", "13:13", "13:21", "13:31"],
        ["13:49", "13:52", "14:00", "14:10"],
        ["14:50", "14:53", "15:01", ""     ],
        ["14:52", "14:55", "15:03", "15:13"],
        ["14:56", "14:59", "15:07", "15:17"],
        ["14:58", "15:01", "15:09", "15:19"],
        ["15:11", "15:14", "15:22", "15:32"],
        ["16:34", ""		 , "16:47"	, ""	 ],
        ["16:35", "16:38", "16:46", ""     ],
        ["16:38", "16:41", "16:49", "16:59"],
        ["16:44", "16:47", "16:55", "17:05"],
        ["16:57", "17:00", "17:08", "17:18"],
        ["17:20", "17:23", "17:31", "17:41"],
        ["17:35", "17:38", "17:46", "17:56"],
        ["18:20", "18:23", "18:31", ""     ],
        ["18:22", "18:25", "18:33", "18:43"],
        ["18:26", "18:29", "18:37", "18:47"],
        ["18:43", "18:46", "18:54", "19:04"],
        ["19:04", "19:07", "19:15", "19:25"],
        ["19:24", "19:27", "19:35", "19:45"],
        ["20:05", "20:08", "20:16", "20:26"],
        ["20:45", "20:48", "20:56", "21:06"],
        [""     , "21:45", "21:53", "22:03"],
			]
		};

		var fukuroNoriba = {
			"noriba" : [
				"1",
				"1",
				"1",
				"1",
				"1",
				"1",
				"1",
				"1",
				"2",
				"1",
				"2",
				"1",
				"1",
				"2",
				"1",
				"2",
				"1",
				"1",
				"1",
				"1",
				"2",
				"1",
				"1",
				"1",
				"1",
				"1",
				"1",
				"1",
			]
		}

		display("#ouro", ouro);
		display("#fukuro", fukuro);

		setInterval(function() {
			display("#ouro", ouro);
			display("#fukuro", fukuro);
            console.log("updated");
		}, 1000*60);


	</script>

</body>

</html>
